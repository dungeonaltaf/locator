<!DOCTYPE html>
<html>
        <head>
            <title>
                    GPS Locator
        </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="../css/index.css">
        </head>
<body>

<p>Click the button to get your coordinates.</p>

<button id ="getLocation" >Try It</button>

<p id="demo"></p>
<form action="http://localhost:3000/post/logout/" method="post" >
<button id="logout"> Logout the session</button>
</form>
<script>
$(document).ready(function(){ 
    var latitude ;
    var longitude;
    $('#getLocation').click(function () { //user clicks button
        if ("geolocation" in navigator){ //check geolocation available 
            //try to get user current location using getCurrentPosition() method
            navigator.geolocation.getCurrentPosition(function(position){
                latitude = position.coords.latitude;
                 longitude = position.coords.longitude; 
                    $("#demo").html("Found your location <br />Lat : "+position.coords.latitude+" </br>Lang :"+ position.coords.longitude);
           
                    //sending ajax request to node server contatining location.
                    $.ajax(  {
                        url: "http://localhost:3000/api/post/location/",
                        headers:{
                        "content-type": "application/x-www-form-urlencoded"
                        },
                        method: "POST",
                        data: {
                            latitude : latitude,
                            longitude : longitude,
                        }
                        }).done(function (response) {
                        console.log(response);
                        }); });
        }else{
            console.log("Browser doesn't support geolocation!");
        }
        });


  });
</script>


</body>
</html>
